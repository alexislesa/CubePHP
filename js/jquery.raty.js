(function(e){e.fn.raty=function(j){options=e.extend({},e.fn.raty.defaults,j);if(this.attr("id")===undefined){c("Invalid selector!");return;}$this=e(this);if(options.number>30){options.number=30;}if(options.path.substring(options.path.length-1,options.path.length)!="/"){options.path+="/";}var n=$this.attr("id");var p=options.path;var h=options.starOff;var l=options.starOn;var o=options.onClick;var g=0;if(!isNaN(options.start)&&options.start>0){g=(options.start>options.number)?options.number:options.start;}var k="";for(var m=1;m<=options.number;m++){k=(options.number<=options.hintList.length&&options.hintList[m-1]!==null)?options.hintList[m-1]:m;starFile=(g>=m)?options.starOn:options.starOff;$this.append('<img id="'+n+"-"+m+'" src="'+options.path+starFile+'" alt="'+m+'" title="'+k+'" class="'+n+'"/>').append((m<options.number)?"&nbsp;":"");}$this.css("width",options.number*20).append('<input id="'+n+'-score" type="hidden" name="'+options.scoreName+'"/>');e("#"+n+"-score").val(g);if(!options.readOnly){e("img."+n).live("mouseenter",function(){var q=e("img."+n).length;for(var r=1;r<=q;r++){if(r<=this.alt){e("img#"+n+"-"+r).attr("src",p+l);}else{e("img#"+n+"-"+r).attr("src",p+h);}}});e("img."+n).live("click",function(){e("input#"+n+"-score").val(this.alt);if(o){o(this.alt);}});$this.live("mouseleave",function(){var q=e("img."+n).length;var s=e("input#"+n+"-score").val();for(var r=1;r<=q;r++){if(r<=s){e("img#"+n+"-"+r).attr("src",p+l);}else{e("img#"+n+"-"+r).attr("src",p+h);}}}).css("cursor","pointer");}else{$this.css("cursor","default");}return $this;};e.fn.raty.defaults={hintList:["bad","poor","regular","good","gorgeous"],number:5,path:"img/",readOnly:false,scoreName:"score",start:0,starOff:"star-off.png",starOn:"star-on.png"};e.fn.raty.readOnly=function(g){if(g){e("img."+$this.attr("id")).die();$this.css("cursor","default").die();}else{d();f();b();$this.css("cursor","pointer");}return e.fn.raty;};e.fn.raty.start=function(g){a(g);return e.fn.raty;};e.fn.raty.click=function(h){var g=(h>=options.number)?options.number:h;a(g);if(options.onClick){options.onClick(g);}else{c('You should add the "onClick: function() {}" option.');}return e.fn.raty;};function d(){var g=$this.attr("id");e("img."+g).live("mouseenter",function(){var h=e("img."+g).length;for(var j=1;j<=h;j++){if(j<=this.alt){e("img#"+g+"-"+j).attr("src",options.path+options.starOn);}else{e("img#"+g+"-"+j).attr("src",options.path+options.starOff);}}});}function f(){var g=$this.attr("id");$this.live("mouseleave",function(){var h=e("img."+g).length;var k=e("input#"+g+"-score").val();for(var j=1;j<=h;j++){if(j<=k){e("img#"+g+"-"+j).attr("src",options.path+options.starOn);}else{e("img#"+g+"-"+j).attr("src",options.path+options.starOff);}}});}function b(){var g=$this.attr("id");e("img."+g).live("click",function(){e("input#"+g+"-score").val(this.alt);});}function a(k){var j=$this.attr("id");var g=e("img."+j).length;e("input#"+j+"-score").val(k);for(var h=1;h<=g;h++){if(h<=k){e("img#"+j+"-"+h).attr("src",options.path+options.starOn);}else{e("img#"+j+"-"+h).attr("src",options.path+options.starOff);}}}function c(g){if(window.console&&window.console.log){window.console.log(g);}}})(jQuery);